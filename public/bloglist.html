<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Story Archives - PHAZR | Discover Romantic Stories</title>
    
    <meta name="description" content="Explore the PHAZR archives. Browse hundreds of captivating romantic stories and modern romance fiction. Updated daily.">
    <meta name="keywords" content="romantic stories, love stories, romance fiction, PHAZR, free stories to read">
    <link rel="canonical" href="https://phaz.onrender.com/bloglist.html" />
    
    <meta property="og:site_name" content="PHAZR">
    <meta property="og:title" content="Story Archives - Discover Romantic Stories | PHAZR">
    <meta property="og:description" content="Browse our collection of romantic stories. Search, discover, and read captivating love stories.">
    <meta property="og:url" content="https://phaz.onrender.com/bloglist.html">
    <meta property="og:type" content="website">
    <meta property="og:image" content="https://phaz.onrender.com/assets/og-image.jpg"> <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "CollectionPage",
      "name": "Story Archives - PHAZR",
      "description": "A collection of romantic stories and fiction.",
      "publisher": {
        "@type": "Organization",
        "name": "PHAZR"
      }
    }
    </script>

    <style>
        /* Keeping your beautiful theme, but adding minor performance/accessibility tweaks */
        :root { 
            --pink: #ff69b4; 
            --pink-light: #ff8dc7;
            --pink-dark: #ff4d9f;
            --bg: #001935; 
            --card-bg: #00254d;
            --card-hover: #003366;
            --text-muted: #88a0b9;
        }
        
        * { box-sizing: border-box; }
        
        body { 
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: var(--bg); 
            color: #fff; 
            margin: 0; 
            padding: 20px; 
            padding-bottom: 120px;
            line-height: 1.6;
            text-rendering: optimizeLegibility;
        }

        .header-section { max-width: 1200px; margin: 0 auto 30px; }
        h1 { 
            color: var(--pink); 
            font-size: clamp(24px, 5vw, 36px);
            font-weight: 900; 
            letter-spacing: 2px;
            margin: 0 0 10px 0;
            text-align: center;
            text-shadow: 0 0 20px rgba(255, 105, 180, 0.3);
        }
        
        .subtitle { text-align: center; color: var(--text-muted); font-size: 14px; margin-bottom: 25px; }
        
        .search-container { max-width: 600px; margin: 0 auto 30px; position: relative; }
        .search-box { 
            width: 100%;
            padding: 16px 50px 16px 20px;
            border-radius: 50px;
            background: #000c1a;
            border: 2px solid var(--pink);
            color: #fff;
            font-size: 16px;
            transition: all 0.3s ease;
        }
        .search-box:focus { border-color: var(--pink-light); outline: none; box-shadow: 0 0 20px rgba(255, 105, 180, 0.3); }

        .search-icon { position: absolute; right: 20px; top: 50%; transform: translateY(-50%); pointer-events: none; }
        
        .filter-bar { max-width: 1200px; margin: 0 auto 20px; display: flex; gap: 10px; flex-wrap: wrap; align-items: center; justify-content: space-between; }
        .sort-select { padding: 10px 15px; border-radius: 25px; background: #000c1a; border: 1px solid var(--pink); color: var(--pink); cursor: pointer; }

        .story-grid {
            max-width: 1200px;
            margin: 0 auto;
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
        }
        
        /* SEMANTIC CARD */
        .story-card { 
            background: var(--card-bg);
            padding: 25px;
            border-radius: 15px;
            display: block;
            text-decoration: none;
            color: #fff;
            border-left: 5px solid var(--pink);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
            min-height: 140px;
        }
        
        .story-card:hover { transform: translateY(-5px); background: var(--card-hover); box-shadow: 0 10px 30px rgba(255, 105, 180, 0.2); }
        
        .story-title { font-weight: 700; font-size: 18px; margin-bottom: 10px; color: var(--pink-light); }
        .story-meta { font-size: 12px; color: var(--text-muted); display: flex; align-items: center; gap: 10px; margin-top: 15px; }
        .story-badge { background: rgba(255, 105, 180, 0.2); padding: 4px 12px; border-radius: 15px; color: var(--pink-light); font-weight: 600; }
        
        .pagination { display: flex; justify-content: center; gap: 8px; margin-top: 40px; }
        .page-btn { padding: 10px 15px; border: 2px solid var(--pink); color: var(--pink); background: none; border-radius: 50px; cursor: pointer; font-weight: bold; }
        .page-btn.active { background: var(--pink); color: #fff; }

        .nav-footer { position: fixed; bottom: 20px; left: 50%; transform: translateX(-50%); background: var(--pink); color: #fff; padding: 14px 35px; border-radius: 50px; text-decoration: none; font-weight: bold; z-index: 100; }

        @media (max-width: 768px) {
            .story-grid { grid-template-columns: 1fr; }
            .filter-bar { flex-direction: column; }
        }
    </style>
</head>
<body>

    <header class="header-section">
        <h1>‚ú® STORY ARCHIVES ‚ú®</h1>
        <p class="subtitle">Discover captivating romantic stories</p>
    </header>
    
    <section class="search-container" aria-label="Search Stories">
        <input type="text" id="searchInput" class="search-box" placeholder="Search for your next favorite story..." oninput="searchStories()" aria-label="Search for stories">
        <span class="search-icon">üîç</span>
    </section>
    
    <div class="filter-bar">
        <div class="results-count" id="resultsCount" aria-live="polite">Loading stories...</div>
        <select class="sort-select" id="sortSelect" onchange="sortStories()" aria-label="Sort stories">
            <option value="newest">Newest First</option>
            <option value="oldest">Oldest First</option>
            <option value="title-asc">Title (A-Z)</option>
            <option value="title-desc">Title (Z-A)</option>
        </select>
    </div>
    
    <main id="story-list" class="story-grid">
        <div id="loading" class="loading" style="grid-column: 1/-1; text-align: center; padding: 50px;">
            <p>Loading the latest stories for you...</p>
        </div>
    </main>

    <nav id="pagination" class="pagination" aria-label="Pagination Navigation"></nav>

    <a href="index.html" class="nav-footer">‚Üê BACK TO STREAM</a>

    <script>
        const POSTS_PER_PAGE = 9;
        let allStories = [];
        let filteredStories = [];
        let currentPage = 1;

        async function load() {
            try {
                // Tip: Ensure this path is correct relative to bloglist.html
                const res = await fetch('blogs/index.json');
                if(!res.ok) throw new Error("Could not load index");
                allStories = await res.json();
                filteredStories = [...allStories];
                sortStories();
                document.getElementById('loading').style.display = 'none';
            } catch (error) {
                document.getElementById('story-list').innerHTML = `<p style="grid-column: 1/-1; text-align: center;">Unable to load stories. Please refresh.</p>`;
            }
        }

        function render(page) {
            currentPage = page;
            const start = (page - 1) * POSTS_PER_PAGE;
            const slice = filteredStories.slice(start, start + POSTS_PER_PAGE);
            const storyList = document.getElementById('story-list');
            
            if (slice.length === 0) {
                storyList.innerHTML = `<div style="grid-column: 1/-1; text-align: center;">No stories found matching your search.</div>`;
            } else {
                storyList.innerHTML = slice.map((f, index) => {
                    const cleanTitle = f.replace('.md','').replace(/_/g,' ');
                    // SEO Tip: Article tag helps search engines identify content blocks
                    return `
                    <article>
                        <a href="detail.html?id=${encodeURIComponent(f)}" class="story-card">
                            <h2 class="story-title">${cleanTitle.toUpperCase()}</h2>
                            <div class="story-meta">
                                <span class="story-badge">‚ù§Ô∏è ROMANCE</span>
                                <span>READ STORY ‚Üí</span>
                            </div>
                        </a>
                    </article>`;
                }).join('');
            }

            document.getElementById('resultsCount').textContent = `${filteredStories.length} stories available`;
            updatePagination(page);
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        function updatePagination(page) {
            const totalPages = Math.ceil(filteredStories.length / POSTS_PER_PAGE);
            let phtml = '';
            if (totalPages <= 1) { document.getElementById('pagination').innerHTML = ''; return; }

            phtml += `<button class="page-btn" onclick="render(${page - 1})" ${page === 1 ? 'disabled' : ''} aria-label="Previous page">‚Äπ</button>`;
            for(let i = 1; i <= totalPages; i++) {
                if (i === 1 || i === totalPages || (i >= page - 1 && i <= page + 1)) {
                    phtml += `<button class="page-btn ${i === page ? 'active' : ''}" onclick="render(${i})">${i}</button>`;
                }
            }
            phtml += `<button class="page-btn" onclick="render(${page + 1})" ${page === totalPages ? 'disabled' : ''} aria-label="Next page">‚Ä∫</button>`;
            document.getElementById('pagination').innerHTML = phtml;
        }

        function searchStories() {
            const term = document.getElementById('searchInput').value.toLowerCase().trim();
            filteredStories = allStories.filter(s => s.toLowerCase().includes(term));
            render(1);
        }

        function sortStories() {
            const sortType = document.getElementById('sortSelect').value;
            if(sortType === 'title-asc') filteredStories.sort();
            else if(sortType === 'title-desc') filteredStories.sort().reverse();
            else if(sortType === 'newest') filteredStories = [...allStories].reverse();
            else filteredStories = [...allStories];
            render(1);
        }

        load();
    </script>
</body>
</html>
